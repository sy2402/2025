import streamlit as st

st.set_page_config(page_title="ê±´ê°• ìê°€ì§„ë‹¨ ì‹œë®¬ë ˆì´í„°", page_icon="ğŸ©º")

st.title("ğŸ©º ê±´ê°• ìê°€ì§„ë‹¨ ì‹œë®¬ë ˆì´í„°")
st.markdown("ê°„ë‹¨í•œ ë¬¸ì§„ì„ í†µí•´ ì¦ìƒì˜ ì‘ê¸‰ë„ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.")

# ê²°ê³¼ ì €ì¥ìš© ë³€ìˆ˜
result = None  

# ì¦ìƒ ì„ íƒ
symptom = st.selectbox("ì¦ìƒì„ ì„ íƒí•˜ì„¸ìš”:", [
    "ë³µí†µ", "ë‘í†µ", "ê¸°ì¹¨", "í˜¸í¡ê³¤ë€", "ë°œì—´", "ì–´ì§€ëŸ¬ì›€", "ë©”ìŠ¤êº¼ì›€/êµ¬í† "
])

# ------------------------------
# ë³µí†µ ë¬¸ì§„
if symptom == "ë³µí†µ":
    st.subheader("ğŸ“ ë³µí†µ ë¬¸ì§„")
    area = st.radio("í†µì¦ ìœ„ì¹˜ëŠ” ì–´ë””ì¸ê°€ìš”?", ["ìƒë³µë¶€", "í•˜ë³µë¶€", "ì „ì²´", "ì˜ ëª¨ë¥´ê² ìŒ"])
    intensity = st.slider("í†µì¦ ê°•ë„ (0 = ì—†ìŒ, 10 = ë§¤ìš° ì‹¬í•¨)", 0, 10)
    additional = st.checkbox("êµ¬í† /ì„¤ì‚¬/í˜ˆë³€ ë“±ì˜ ì¦ìƒì´ ë™ë°˜ë˜ë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if intensity >= 7 and additional:
            result = ("error", "ğŸš¨ ì‘ê¸‰ì‹¤ ë°©ë¬¸ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ ë³‘ì›ì— ë°©ë¬¸í•˜ì„¸ìš”.")
        elif intensity <= 3 and not additional:
            result = ("success", "âœ… ìê°€ì¡°ì¹˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ìˆ˜ë¶„ ì„­ì·¨ì™€ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.")
        else:
            result = ("warning", "âš ï¸ ì™¸ë˜ ì§„ë£Œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.")

# ------------------------------
# ë‘í†µ ë¬¸ì§„
elif symptom == "ë‘í†µ":
    st.subheader("ğŸ§  ë‘í†µ ë¬¸ì§„")
    intensity = st.slider("ë‘í†µ ê°•ë„ (0 = ì—†ìŒ, 10 = ë§¤ìš° ì‹¬í•¨)", 0, 10)
    sudden = st.checkbox("ê°‘ì‘ìŠ¤ëŸ½ê³  ë²ˆê°œì²˜ëŸ¼ ì‹œì‘ëœ ë‘í†µì¸ê°€ìš”?")
    fever = st.checkbox("ë°œì—´ ë˜ëŠ” ëª© ê²½ì§ì´ ë™ë°˜ë˜ë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if sudden or (intensity >= 8 and fever):
            result = ("error", "ğŸš¨ ë‡Œì¶œí˜ˆ/ìˆ˜ë§‰ì—¼ ê°€ëŠ¥ì„±. ì¦‰ì‹œ ì‘ê¸‰ì‹¤ ë°©ë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤.")
        elif intensity <= 3:
            result = ("success", "âœ… ìê°€ì¡°ì¹˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ìˆ˜ë©´ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ì™„í™”ê°€ ë„ì›€ì´ ë©ë‹ˆë‹¤.")
        else:
            result = ("warning", "âš ï¸ ì™¸ë˜ ì§„ë£Œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.")

# ------------------------------
# ê¸°ì¹¨ ë¬¸ì§„
elif symptom == "ê¸°ì¹¨":
    st.subheader("ğŸ˜· ê¸°ì¹¨ ë¬¸ì§„")
    duration = st.radio("ê¸°ì¹¨ì´ ì§€ì†ëœ ê¸°ê°„ì€?", ["3ì¼ ë¯¸ë§Œ", "3ì¼ ì´ìƒ", "2ì£¼ ì´ìƒ"])
    fever = st.checkbox("ë°œì—´ì´ ë™ë°˜ë˜ë‚˜ìš”?")
    breathing = st.checkbox("í˜¸í¡ê³¤ë€ì´ë‚˜ í‰í†µì´ ìˆë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if breathing:
            result = ("error", "ğŸš¨ íë ´ ë˜ëŠ” ì²œì‹ ê°€ëŠ¥ì„±. ì¦‰ì‹œ ë³‘ì› ë°©ë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤.")
        elif duration == "2ì£¼ ì´ìƒ":
            result = ("warning", "âš ï¸ ë§Œì„± ê¸°ì¹¨ì€ ê²°í•µ ë“± ì›ì¸ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ì™¸ë˜ ì§„ë£Œ ê¶Œì¥.")
        elif duration == "3ì¼ ë¯¸ë§Œ" and not fever:
            result = ("success", "âœ… ìê°€ì¡°ì¹˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì¶©ë¶„í•œ ìˆ˜ë¶„ê³¼ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.")
        else:
            result = ("warning", "âš ï¸ ì™¸ë˜ ì§„ë£Œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.")

# ------------------------------
# í˜¸í¡ê³¤ë€ ë¬¸ì§„
elif symptom == "í˜¸í¡ê³¤ë€":
    st.subheader("ğŸ’¨ í˜¸í¡ê³¤ë€ ë¬¸ì§„")
    sudden = st.checkbox("ê°‘ì‘ìŠ¤ëŸ½ê²Œ ë°œìƒí–ˆë‚˜ìš”?")
    chest_pain = st.checkbox("ê°€ìŠ´ í†µì¦ì´ í•¨ê»˜ ìˆë‚˜ìš”?")
    chronic = st.checkbox("ê¸°ì € ì§ˆí™˜(ì²œì‹, COPD ë“±)ì´ ìˆë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if sudden and chest_pain:
            result = ("error", "ğŸš¨ ì‹¬ê·¼ê²½ìƒ‰ ë˜ëŠ” íìƒ‰ì „ì¦ ê°€ëŠ¥ì„±. ì¦‰ì‹œ ì‘ê¸‰ì‹¤ë¡œ ê°€ì„¸ìš”.")
        elif chronic:
            result = ("warning", "âš ï¸ ë§Œì„±ì§ˆí™˜ìì¼ ê²½ìš° ìƒíƒœ ì•…í™” ê°€ëŠ¥ì„±. ë³‘ì› ë°©ë¬¸ í•„ìš”.")
        else:
            result = ("success", "âœ… ê²½ë¯¸í•œ í˜¸í¡ê³¤ë€ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒí™©ì„ ì§€ì¼œë³´ë©° íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.")

# ------------------------------
# ë°œì—´ ë¬¸ì§„
elif symptom == "ë°œì—´":
    st.subheader("ğŸŒ¡ï¸ ë°œì—´ ë¬¸ì§„")
    temperature = st.slider("ì²´ì˜¨ì„ ì„ íƒí•˜ì„¸ìš” (Â°C)", 35.0, 42.0, step=0.1)
    duration = st.radio("ë°œì—´ì´ ì§€ì†ëœ ê¸°ê°„ì€?", ["1ì¼ ì´í•˜", "2~3ì¼", "3ì¼ ì´ìƒ"])
    infant = st.checkbox("ì†Œì•„/ì˜ìœ ì•„ì¸ê°€ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if temperature >= 39.0 and duration == "3ì¼ ì´ìƒ":
            result = ("error", "ğŸš¨ ê³ ì—´ ì§€ì† ì‹œ ì„¸ê· ì„± ê°ì—¼ ê°€ëŠ¥ì„±. ë³‘ì› ì§„ë£Œê°€ ê¼­ í•„ìš”í•©ë‹ˆë‹¤.")
        elif infant and temperature >= 38.0:
            result = ("warning", "âš ï¸ ì˜ìœ ì•„ì˜ ë°œì—´ì€ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì†Œì•„ì²­ì†Œë…„ê³¼ ì§„ë£Œ ê¶Œì¥.")
        elif temperature <= 37.5:
            result = ("success", "âœ… ì •ìƒ ë²”ìœ„ì˜ ì²´ì˜¨ì…ë‹ˆë‹¤. ê²½ê³¼ ê´€ì°°ì„ ê¶Œì¥í•©ë‹ˆë‹¤.")
        else:
            result = ("warning", "âš ï¸ ì™¸ë˜ ì§„ë£Œë¥¼ ê³ ë ¤í•˜ì„¸ìš”.")

# ------------------------------
# ì–´ì§€ëŸ¬ì›€ ë¬¸ì§„
elif symptom == "ì–´ì§€ëŸ¬ì›€":
    st.subheader("ğŸŒ€ ì–´ì§€ëŸ¬ì›€ ë¬¸ì§„")
    standing = st.checkbox("ì¼ì–´ì„¤ ë•Œ ë” ì‹¬í•´ì§€ë‚˜ìš”?")
    nausea = st.checkbox("ë©”ìŠ¤êº¼ì›€ì´ ë™ë°˜ë˜ë‚˜ìš”?")
    trauma = st.checkbox("ìµœê·¼ ë¨¸ë¦¬ë¥¼ ë‹¤ì¹œ ì ì´ ìˆë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if trauma:
            result = ("error", "ğŸš¨ ì™¸ìƒ í›„ ì–´ì§€ëŸ¬ì›€ì€ ë‡Œì†ìƒ ê°€ëŠ¥ì„±. ì¦‰ì‹œ ë³‘ì› ë°©ë¬¸ í•„ìš”.")
        elif standing and nausea:
            result = ("warning", "âš ï¸ ì €í˜ˆì•• ë˜ëŠ” ì „ì •ê¸°ê´€ ì´ìƒ ê°€ëŠ¥ì„±. ì™¸ë˜ ì§„ë£Œ ê¶Œì¥.")
        else:
            result = ("success", "âœ… ì¼ì‹œì ì¸ í˜„ê¸°ì¦ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆ˜ë¶„ ì„­ì·¨ ë° íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.")

# ------------------------------
# ë©”ìŠ¤êº¼ì›€/êµ¬í†  ë¬¸ì§„
elif symptom == "ë©”ìŠ¤êº¼ì›€/êµ¬í† ":
    st.subheader("ğŸ¤¢ ë©”ìŠ¤êº¼ì›€/êµ¬í†  ë¬¸ì§„")
    frequency = st.radio("êµ¬í†  ë¹ˆë„ëŠ”?", ["1~2íšŒ", "3íšŒ ì´ìƒ", "ì§€ì†ì ì¸ êµ¬í† "])
    hydration = st.checkbox("ìˆ˜ë¶„ ì„­ì·¨ê°€ ì–´ë ¤ìš´ ìƒíƒœì¸ê°€ìš”?")
    blood = st.checkbox("í† ì‚¬ë¬¼ì— í”¼ê°€ ì„ì—¬ ìˆë‚˜ìš”?")

    if st.button("ì§„ë‹¨í•˜ê¸°"):
        if blood or (frequency == "ì§€ì†ì ì¸ êµ¬í† " and hydration):
            result = ("error", "ğŸš¨ íƒˆìˆ˜ ë˜ëŠ” ìœ„ì¥ ì¶œí˜ˆ ê°€ëŠ¥ì„±. ì¦‰ì‹œ ë³‘ì› ë°©ë¬¸ í•„ìš”.")
        elif frequency == "1~2íšŒ" and not hydration:
            result = ("success", "âœ… ì¼ì‹œì ì¸ ìœ„ì¥ì¥ì• ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²½ê³¼ ê´€ì°°ì„ ê¶Œì¥í•©ë‹ˆë‹¤.")
        else:
            result = ("warning", "âš ï¸ ì¦ìƒì´ ì§€ì†ëœë‹¤ë©´ ì™¸ë˜ ì§„ë£Œë¥¼ ë°›ìœ¼ì„¸ìš”.")

# ------------------------------
# ìê°€ì§„ë‹¨ ìµœì¢… ê²°ê³¼ ì¶œë ¥
if result:
    st.markdown("---")
    st.subheader("ğŸ©º ìê°€ì§„ë‹¨ ê²°ê³¼")
    level, message = result
    if level == "error":
        st.error(message)
    elif level == "warning":
        st.warning(message)
    elif level == "success":
        st.success(message)

# ------------------------------
# ê³µí†µ ì•ˆë‚´
st.markdown("---")
st.info("â— ì´ ì•±ì€ ì°¸ê³ ìš© ìê°€ì§„ë‹¨ ë„êµ¬ì´ë©°, ì •í™•í•œ ì˜í•™ì  íŒë‹¨ì€ ì „ë¬¸ì˜ì˜ ì§„ë£Œë¥¼ í†µí•´ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.")
